<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Phone Register - JomDonate</title>

  <link href="assets/img/favicon.png" rel="icon" />
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&family=Amatic+SC:wght@400;700&display=swap"
    rel="stylesheet" />

  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="assets/vendor/aos/aos.css" rel="stylesheet" />

  <link href="assets/css/main.css" rel="stylesheet" />

  <style>
    /* Prevent page scroll */
    html, body { height: 100%; overflow: hidden; }

    /* Background image (same as login) */
    body.auth-page{
      background-image: url("assets/img/login.png");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      min-height: 100vh;
    }

    /* Remove default section padding that causes scroll */
    body.auth-page .section{
      padding: 0 !important;
      background: transparent !important;
    }

    /* Fit content into viewport minus header height */
    body.auth-page .main{
      background: transparent !important;
      height: 100vh;
      padding-top: 92px; /* desktop header height */
    }

    /* Center the card */
    body.auth-page .section{
      height: calc(100vh - 92px);
      display: flex;
      align-items: center;
    }

    /* Keep card safe on small screens */
    .auth-card{
      max-height: calc(100vh - 140px);
      overflow: auto;
    }

    @media (max-width: 1199px){
      body.auth-page .main{ padding-top: 56px; }
      body.auth-page .section{ height: calc(100vh - 56px); }
    }

    body.auth-page #header{
      background: transparent !important;
      box-shadow: none !important;
    }

    /* small ui improvements */
    .otp-box{
      letter-spacing: 4px;
      text-align: center;
      font-weight: 700;
      font-size: 18px;
    }
  </style>
</head>

<body class="auth-page">

  <header id="header" class="header fixed-top">
    <div class="container d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center me-auto me-lg-0">
        <h1>JomDonate<span>.</span></h1>
      </a>
    </div>
  </header>

  <main class="main">
    <section class="section">
      <div class="container" data-aos="fade-up">
        <div class="row justify-content-center">
          <div class="col-lg-6">

            <div class="auth-card">
              <div class="text-center mb-4">
                <h2 class="auth-title">Register with Phone</h2>
                <p class="auth-subtitle">Enter your phone number to receive a verification code.</p>
              </div>

              <form id="phoneRegisterForm" class="php-email-form" onsubmit="return false;">
                <div class="row gy-3">

                  <div class="col-12">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="phoneName" placeholder="Your name" required />
                  </div>

                  <div class="col-12">
                    <label class="form-label">Phone Number</label>
                    <div class="input-group">
                      <span class="input-group-text">+60</span>
                      <input type="tel" class="form-control" id="phoneNumber" placeholder="12xxxxxxxx" required />
                    </div>
                    <small style="opacity:.75;">Example: +60 12 345 6789</small>
                  </div>

                  <div class="col-12">
                    <div id="recaptcha-container"></div>
                  </div>

                  <!-- Step 1 buttons -->
                  <div class="col-12" id="stepSend">
                    <div class="loading" id="sendLoading" style="display:none;">Loading</div>
                    <div class="error-message" id="sendError" style="display:none;"></div>
                    <div class="sent-message" id="sendSuccess" style="display:none;">
                      Verification code sent! Please check your SMS.
                    </div>

                    <button type="button" class="btn btn-primary w-100 auth-btn" id="sendOtpBtn">
                      Send Verification Code
                    </button>
                  </div>

                  <!-- Step 2 OTP -->
                  <div class="col-12" id="stepVerify" style="display:none;">
                    <label class="form-label">Verification Code</label>
                    <input type="text" class="form-control otp-box" id="otpCode" placeholder="------" maxlength="6" />

                    <div class="d-flex gap-2 mt-3">
                      <button type="button" class="btn btn-primary w-100 auth-btn" id="verifyOtpBtn">
                        Verify & Create Account
                      </button>
                      <button type="button" class="btn btn-outline-secondary w-100 auth-btn" id="resendOtpBtn">
                        Resend
                      </button>
                    </div>

                    <div class="error-message mt-3" id="verifyError" style="display:none;"></div>
                    <div class="sent-message mt-3" id="verifySuccess" style="display:none;">
                      Account created successfully! Redirecting to login...
                    </div>
                  </div>

                  <div class="col-12">
                    <div class="auth-divider my-3"><span>or</span></div>
                  </div>

                  <div class="col-12">
                    <button type="button" class="btn auth-social-btn w-100" id="googleRegisterBtn">
                      <i class="bi bi-google"></i> Register with Google
                    </button>
                  </div>

                  <div class="col-12 text-center mt-2">
                    <a href="login.html" class="auth-link">
                      <i class="bi bi-arrow-left"></i> Back to Login
                    </a>
                  </div>

                </div>
              </form>

            </div><!-- auth-card -->

          </div>
        </div>
      </div>
    </section>
  </main>

  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>

  <script>
    AOS.init();

    const sendLoading = document.getElementById("sendLoading");
    const sendError = document.getElementById("sendError");
    const sendSuccess = document.getElementById("sendSuccess");

    const stepSend = document.getElementById("stepSend");
    const stepVerify = document.getElementById("stepVerify");

    const verifyError = document.getElementById("verifyError");
    const verifySuccess = document.getElementById("verifySuccess");

    function resetSendMsgs(){
      sendLoading.style.display = "none";
      sendError.style.display = "none";
      sendSuccess.style.display = "none";
      sendError.textContent = "";
    }
    function resetVerifyMsgs(){
      verifyError.style.display = "none";
      verifySuccess.style.display = "none";
      verifyError.textContent = "";
    }

  //   // Frontend demo: Send OTP
  //   document.getElementById("sendOtpBtn").addEventListener("click", () => {
  //     resetSendMsgs();
  //     resetVerifyMsgs();

  //     const name = document.getElementById("phoneName").value.trim();
  //     const phone = document.getElementById("phoneNumber").value.trim();

  //     if(!name){
  //       sendError.textContent = "Please enter your name.";
  //       sendError.style.display = "block";
  //       return;
  //     }
  //     if(!phone){
  //       sendError.textContent = "Please enter your phone number.";
  //       sendError.style.display = "block";
  //       return;
  //     }

  //     sendLoading.style.display = "block";

  //     // Simulate SMS request
  //     setTimeout(() => {
  //       sendLoading.style.display = "none";
  //       sendSuccess.style.display = "block";

  //       // show OTP step
  //       stepVerify.style.display = "block";
  //       // optionally hide send step button
  //       // stepSend.style.display = "none";
  //     }, 700);
  //   });

  //   // Frontend demo: Verify OTP
  //   document.getElementById("verifyOtpBtn").addEventListener("click", () => {
  //     resetVerifyMsgs();

  //     const code = document.getElementById("otpCode").value.trim();
  //     if(code.length !== 6){
  //       verifyError.textContent = "Please enter the 6-digit verification code.";
  //       verifyError.style.display = "block";
  //       return;
  //     }

  //     verifySuccess.style.display = "block";

  //     // Simulate redirect
  //     setTimeout(() => {
  //       window.location.href = "login.html";
  //     }, 900);
  //   });

  //   // Resend OTP (frontend demo)
  //   document.getElementById("resendOtpBtn").addEventListener("click", () => {
  //     resetSendMsgs();
  //     sendSuccess.textContent = "Verification code resent! Please check your SMS.";
  //     sendSuccess.style.display = "block";
  //   });
  </script>

  <script type="module" src="js/phone-register.js"></script>


</body>
</html>
